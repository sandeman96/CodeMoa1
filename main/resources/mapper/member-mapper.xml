<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

	<select id="login" resultMap="memberResultSet">
		select *
		from member
		where m_id=#{id}
		and m_status='Y'

	</select>

	<insert id="insertMember">
		insert into member
		values(#{id}, #{email}, #{pwd}, #{nickName}, default, default, null, null, null, null)
	</insert>
	
	
	<select id="memberInfo" resultMap="memberResultSet">
		select * 
		from member
		where m_id=#{user}
	</select>
	
	<update id="updateIntroduce">
		update member
		set m_edu=#{education}, m_location=#{location}, m_skill=#{skill}, m_note=#{note}
		where m_id=#{id}
	</update>
	
	<update id="deleteMember">
		update member
		set m_status='N'
		where m_id=#{id}
	</update>
	
	<update id="updateMember">
		update member
		set m_email=#{email}, m_nick=#{nickName}
		where m_id=#{id}
	</update>
	
	<update id="updatePwd" parameterType="hashmap">
		update member set m_pwd=#{newPwd}
		where m_id=#{userId}
	</update>

	<resultMap type="Member" id="memberResultSet">
		<id column="M_ID" property="id" />
		<result column="M_EMAIL" property="email" />
		<result column="M_PWD" property="pwd" />
		<result column="M_NICK" property="nickName" />
		<result column="M_STATUS" property="status" />
		<result column="M_ADMIN" property="admin" />
		<result column="M_EDU" property="education" />
		<result column="M_LOCATION" property="location" />
		<result column="M_SKILL" property="skill" />
		<result column="M_NOTE" property="note" />
	</resultMap>
	
	<select id="selectNickName" resultType="_int">
		select count(*)
		from member
		where m_nick=#{nickName}
	</select>
	

</mapper>
